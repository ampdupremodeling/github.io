<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Amp'd Up Remodeling | Gallery</title>
<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
/* --- Carousel styles --- */
.gallery-carousel {
  position: relative;
  max-width: 100%;
  margin: 20px auto;
  overflow: hidden;
  border-radius: 10px;
}
.gallery-carousel img {
  width: 100%;
  display: none;
  border-radius: 10px;
}
.gallery-carousel img.active {
  display: block;
}
.carousel-btn {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background: rgba(0,0,0,0.4);
  color: white;
  border: none;
  font-size: 2rem;
  padding: 5px 10px;
  cursor: pointer;
  border-radius: 5px;
}
.carousel-btn.left { left: 10px; }
.carousel-btn.right { right: 10px; }

/* --- Gallery grid --- */
.gallery-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px,1fr));
  gap: 15px;
  margin-top: 30px;
}
.gallery-item img {
  width: 100%;
  border-radius: 8px;
  cursor: pointer;
}

/* --- Lightbox --- */
#lightbox {
  position: fixed;
  display: none;
  top:0; left:0;
  width:100%;
  height:100%;
  background: rgba(0,0,0,0.8);
  justify-content: center;
  align-items: center;
  z-index: 1000;
}
#lightbox img {
  max-width: 90%;
  max-height: 90%;
  border-radius: 8px;
}
#lightbox:active { display:none; }
</style>
</head>
<body>

<header>
  <h1>Gallery & Recent Projects</h1>
</header>

<!-- Featured Carousel -->
<div class="gallery-carousel" id="carousel">
  <button class="carousel-btn left" onclick="prevSlide()">&#10094;</button>
  <button class="carousel-btn right" onclick="nextSlide()">&#10095;</button>
</div>

<!-- Full gallery -->
<div class="gallery-grid" id="gallery"></div>

<!-- Lightbox -->
<div id="lightbox" onclick="this.style.display='none'">
  <img id="lightbox-img">
</div>

<script>
// --- Load images from JSON ---
fetch("images/images.json")
  .then(res => res.json())
  .then(images => {
    const carousel = document.getElementById("carousel");
    const gallery = document.getElementById("gallery");

    // --- Pick first 4 images for carousel ---
    const featured = images.slice(0,4);
    featured.forEach((img, i) => {
      const el = document.createElement("img");
      el.src = `images/${img.file}`;
      if(i===0) el.classList.add("active");
      carousel.appendChild(el);
    });

    // --- Build full gallery ---
    images.forEach(img => {
      const fig = document.createElement("figure");
      fig.classList.add("gallery-item");
      fig.innerHTML = `<img src="images/${img.file}" onclick="openLightbox(this.src)">
                       <figcaption>${img.caption}</figcaption>`;
      gallery.appendChild(fig);
    });
  });

// --- Carousel controls ---
let current = 0;
function showSlide(n){
  const slides = document.querySelectorAll("#carousel img");
  slides.forEach(s => s.classList.remove("active"));
  if(n >= slides.length) current=0;
  if(n <0) current=slides.length-1;
  slides[current].classList.add("active");
}
function nextSlide(){ current++; showSlide(current); }
function prevSlide(){ current--; showSlide(current); }
setInterval(nextSlide, 5000); // auto-advance every 5s

// --- Lightbox ---
function openLightbox(src){
  const lb = document.getElementById("lightbox");
  const lbImg = document.getElementById("lightbox-img");
  lbImg.src = src;
  lb.style.display = "flex";
}
</script>

</body>
</html>
